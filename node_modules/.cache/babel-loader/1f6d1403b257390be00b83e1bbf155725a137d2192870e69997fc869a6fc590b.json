{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[userKey,setUserKey]=useState('');const[message,setMessage]=useState('');const navigate=useNavigate();const handleKeyChange=e=>{setUserKey(e.target.value);};const validateUserKey=key=>{const regex=/^[a-zA-Z0-9!@#$%^&*()_+=-]{6,12}$/;return regex.test(key);};const handleSubmit=async e=>{e.preventDefault();if(!validateUserKey(userKey)){setMessage('User key must be 6 to 12 characters long and include letters, numbers, and special characters.');return;}try{// Update API URL for serverless functions\nconst response=await axios.post('/.netlify/functions/decrypt',{userKey},{headers:{'Content-Type':'application/json'}});setMessage(response.data.message||'');// Display the response message\nconsole.log(response.data);if(response.data.success){localStorage.setItem('userKey',userKey);navigate('/notes');if(response.data.isDecrypted){// Encrypt the file after 10 minutes\nsetTimeout(async()=>{try{await axios.post('/.netlify/functions/encrypt',{userKey});console.log('File encrypted successfully after 10 minutes.');navigate('/');localStorage.clear();console.log('LocalStorage cleared.');}catch(error){console.error('Error during encryption:',error);setMessage('Error during encryption.');}},600000);// 10 minutes in milliseconds\n}}}catch(error){console.error('Error:',error.response?error.response.data:error.message);setMessage('Error Decrypting data.');}};// Internal CSS styles\nconst styles={body:{fontFamily:'Arial, sans-serif',background:'linear-gradient(135deg, #f1f1f1, #e1e1e1)',height:'100vh',display:'flex',justifyContent:'center',alignItems:'center',margin:0,padding:0},container:{width:'100%',maxWidth:'400px',padding:'20px',backgroundColor:'#fff',borderRadius:'10px',boxShadow:'0 10px 25px rgba(0, 0, 0, 0.1)'},header:{color:'#333',marginBottom:'20px',textAlign:'center'},form:{display:'flex',flexDirection:'column',gap:'15px'},input:{padding:'12px',fontSize:'16px',border:'1px solid #ccc',borderRadius:'5px',transition:'border 0.3s'},inputFocus:{outline:'none',borderColor:'#555'},button:{padding:'12px',backgroundColor:'#4CAF50',color:'white',fontSize:'16px',border:'none',borderRadius:'5px',cursor:'pointer',transition:'background-color 0.3s'},buttonHover:{backgroundColor:'#45a049'},message:{color:'red',marginTop:'10px'}};return/*#__PURE__*/_jsx(\"div\",{style:styles.body,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.header,children:\"Enter User Key\"}),/*#__PURE__*/_jsxs(\"form\",{style:styles.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{style:styles.input,type:\"text\",value:userKey,onChange:handleKeyChange,placeholder:\"Enter your key\",required:true,onFocus:e=>e.target.style.borderColor=styles.inputFocus.borderColor,onBlur:e=>e.target.style.borderColor=styles.input.borderColor}),/*#__PURE__*/_jsx(\"button\",{style:styles.button,type:\"submit\",onMouseOver:e=>e.target.style.backgroundColor=styles.buttonHover.backgroundColor,onMouseOut:e=>e.target.style.backgroundColor=styles.button.backgroundColor,children:\"Submit\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{style:styles.message,children:message})]})});}export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","userKey","setUserKey","message","setMessage","navigate","handleKeyChange","e","target","value","validateUserKey","key","regex","test","handleSubmit","preventDefault","response","post","headers","data","console","log","success","localStorage","setItem","isDecrypted","setTimeout","clear","error","styles","body","fontFamily","background","height","display","justifyContent","alignItems","margin","padding","container","width","maxWidth","backgroundColor","borderRadius","boxShadow","header","color","marginBottom","textAlign","form","flexDirection","gap","input","fontSize","border","transition","inputFocus","outline","borderColor","button","cursor","buttonHover","marginTop","style","children","onSubmit","type","onChange","placeholder","required","onFocus","onBlur","onMouseOver","onMouseOut"],"sources":["E:/placement project/serverless_notes/src/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction LoginPage() {\r\n  const [userKey, setUserKey] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleKeyChange = (e) => {\r\n    setUserKey(e.target.value);\r\n  };\r\n\r\n  const validateUserKey = (key) => {\r\n    const regex = /^[a-zA-Z0-9!@#$%^&*()_+=-]{6,12}$/;\r\n    return regex.test(key);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateUserKey(userKey)) {\r\n      setMessage('User key must be 6 to 12 characters long and include letters, numbers, and special characters.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Update API URL for serverless functions\r\n      const response = await axios.post('/.netlify/functions/decrypt', { userKey }, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      setMessage(response.data.message || ''); // Display the response message\r\n      console.log(response.data);\r\n\r\n      if (response.data.success) {\r\n        localStorage.setItem('userKey', userKey);\r\n        navigate('/notes');\r\n\r\n        if (response.data.isDecrypted) {\r\n          // Encrypt the file after 10 minutes\r\n          setTimeout(async () => {\r\n            try {\r\n              await axios.post('/.netlify/functions/encrypt', { userKey });\r\n              console.log('File encrypted successfully after 10 minutes.');\r\n              navigate('/');\r\n              localStorage.clear();\r\n              console.log('LocalStorage cleared.');\r\n            } catch (error) {\r\n              console.error('Error during encryption:', error);\r\n              setMessage('Error during encryption.');\r\n            }\r\n          }, 600000); // 10 minutes in milliseconds\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error.response ? error.response.data : error.message);\r\n      setMessage('Error Decrypting data.');\r\n    }\r\n  };\r\n\r\n  // Internal CSS styles\r\n  const styles = {\r\n    body: {\r\n      fontFamily: 'Arial, sans-serif',\r\n      background: 'linear-gradient(135deg, #f1f1f1, #e1e1e1)',\r\n      height: '100vh',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      margin: 0,\r\n      padding: 0,\r\n    },\r\n    container: {\r\n      width: '100%',\r\n      maxWidth: '400px',\r\n      padding: '20px',\r\n      backgroundColor: '#fff',\r\n      borderRadius: '10px',\r\n      boxShadow: '0 10px 25px rgba(0, 0, 0, 0.1)',\r\n    },\r\n    header: {\r\n      color: '#333',\r\n      marginBottom: '20px',\r\n      textAlign: 'center',\r\n    },\r\n    form: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      gap: '15px',\r\n    },\r\n    input: {\r\n      padding: '12px',\r\n      fontSize: '16px',\r\n      border: '1px solid #ccc',\r\n      borderRadius: '5px',\r\n      transition: 'border 0.3s',\r\n    },\r\n    inputFocus: {\r\n      outline: 'none',\r\n      borderColor: '#555',\r\n    },\r\n    button: {\r\n      padding: '12px',\r\n      backgroundColor: '#4CAF50',\r\n      color: 'white',\r\n      fontSize: '16px',\r\n      border: 'none',\r\n      borderRadius: '5px',\r\n      cursor: 'pointer',\r\n      transition: 'background-color 0.3s',\r\n    },\r\n    buttonHover: {\r\n      backgroundColor: '#45a049',\r\n    },\r\n    message: {\r\n      color: 'red',\r\n      marginTop: '10px',\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={styles.body}>\r\n      <div style={styles.container}>\r\n        <h1 style={styles.header}>Enter User Key</h1>\r\n        <form style={styles.form} onSubmit={handleSubmit}>\r\n          <input\r\n            style={styles.input}\r\n            type=\"text\"\r\n            value={userKey}\r\n            onChange={handleKeyChange}\r\n            placeholder=\"Enter your key\"\r\n            required\r\n            onFocus={(e) => e.target.style.borderColor = styles.inputFocus.borderColor}\r\n            onBlur={(e) => e.target.style.borderColor = styles.input.borderColor}\r\n          />\r\n          <button\r\n            style={styles.button}\r\n            type=\"submit\"\r\n            onMouseOver={(e) => e.target.style.backgroundColor = styles.buttonHover.backgroundColor}\r\n            onMouseOut={(e) => e.target.style.backgroundColor = styles.button.backgroundColor}\r\n          >\r\n            Submit\r\n          </button>\r\n        </form>\r\n        {message && <p style={styles.message}>{message}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}